{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Listar Usuario - Admin</title>
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/styleAdmin.css' %}">
    <link rel="stylesheet" href="{% static 'css/styleguide.css' %}">
</head>
<body>
    <header>
        <div class="navigation">
            <div class="navigation_wrapper">
                <div class="middle_nav_wrapper">
                    <div class="middle_nav">
                        <div class="logo">
                            <div class="text_wrapper">MERKACHECHERES</div>
                        </div>
                        <div class="frame">
                            <div class="div_wrapper">
                                <div class="div">
                                    <button class="dropbtn " onclick="window.location.href='{% url 'index' %}'">Inicio</button>
                                </div>
                            </div>
                            <div class="btn_primary_wrapper">
                                <button class="dropbtn">Categorías</button>
                            </div>        
                            <div class="div_wrapper">
                                <div class="div">
                                    <button class="dropbtn">Catalogo</button>
                                </div>
                            </div>
                            </div>
                        <div class="buscar">
                            <input type="password" id="password" name="password" placeholder="Buscar algo.." class="navbar">
                        </div>
                        <div class="frame_2">
                            <div class="iniciar_crear_cuenta">
                                <div class="btn_login"> 
                                    {% if not request.session.validar %}
                                        <button class="button_text_wrapper"
                                            onclick="window.location.href='{% url 'login' %}'">Iniciar Sesión</button>
                                    {% endif %}
                                </div>
                                <div class="btn_registro">
                                    {% if not request.session.validar %}
                                        <button class="button_text_wrapper"
                                            onclick="window.location.href='{% url 'registro' %}'">Crear Cuenta</button>
                                    {% endif %}
                                </div>
                                
                            </div>
                            <div class="icons">
                                {% if request.session.validar %}
                                    <div class="vender_button_div" >
                                        <button class="vender-button" id="venderTexto" onclick="window.location.href='{% url 'publicar' %}'">
                                            Vender 
                                                <img src="{% static 'img/vender.png' %}" id="heartButton" alt="Usuario">
                                        </button>
                                    </div>
                                {% endif %}
                                
                                {% if messages %}
                                    <div id="message-container">
                                        {% for message in messages %}
                                            {% if message.tags == "success" %}
                                                <div class="alert alert-success alert-dismissible fade show" role="alert">
                                                    {{ message }}
                                                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                                                </div>
                                            {% elif message.tags == "error" %}
                                                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                                                    {{ message }}
                                                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                                                </div>
                                            {% endif %}
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <main class="mainGeneralContainer">
        <aside class="asideAdmin">
            <div class="adminContainer">
                <div class="adminTittleContainer">
                    <h2 id="titleAdmin">Administrador</h2>
                </div>
                <div class="photoAdminContainer">
                    <img src="{% static 'img/admin.png' %}" alt="Foto del administrador" class="photoAdmin">
                </div>
            </div>
            <div class="dashboardContainer">
                <div class="dashboardTextContainer">
                    <button class="botonDashboard">
                        <h4 id="dashboardText">Dashboard</h4>
                    </button>
                </div>
            </div>
            <div class="usersContainer">
                <div class="dashboardTextContainer">
                    <button class="botonUsuarios">
                        <h4 id="usersText">Usuarios</h4>
                    </button>
                </div>
            </div>
        </aside>
            <div class="DIVCOSAS">
                <div class="mainContentWrapper">
                    <section class="dataGeneralContainer">
                        <div class="searchbarFilterContainer">
                            <div class="filterContainer">
                                <div class="filterDiv">
                                    <a href="" id="filterText">Filtro</a>
                                </div>
                                <div class="IconFilterDiv">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" fill="none">
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M0.292893 0.792893C-0.0675907 1.15338 -0.0953203 1.72061 0.209705 2.1129L0.292893 2.20711L5.29289 7.20711C5.65338 7.56759 6.22061 7.59532 6.6129 7.2903L6.70711 7.20711L11.7071 2.20711C12.0976 1.81658 12.0976 1.18342 11.7071 0.792893C11.3466 0.432409 10.7794 0.40468 10.3871 0.709705L10.2929 0.792893L6 5.085L1.70711 0.792893C1.34662 0.432409 0.779392 0.40468 0.387101 0.709705L0.292893 0.792893Z" fill="#545353"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="searchContainer">
                                <input type="text" id="buscarText" placeholder="Buscar...">
                                <div class="search-inner">
                                    <div class="searchIconContainer">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 0 19 19" fill="none">
                                            <circle cx="7.375" cy="7.375" r="6.375" stroke="#7E7D7C" stroke-width="2" stroke-linecap="round"/>
                                            <path d="M12.3333 12.3333L18 17.9999" stroke="#7E7D7C" stroke-width="2" stroke-linecap="round"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            <button class="registerButton">
                                <div class="userRegisterContainer">
                                    <div class="registerUserContainer">
                                        <a id="registerUserText">Registrar Usuario</a>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                                            <path d="M16.2365 14.9062C15.1657 13.0549 13.5154 11.7274 11.5896 11.0981C12.5422 10.531 13.2823 9.66686 13.6963 8.63841C14.1103 7.60996 14.1752 6.47405 13.8811 5.40513C13.587 4.33621 12.9502 3.39338 12.0684 2.72142C11.1866 2.04947 10.1086 1.68555 8.99998 1.68555C7.89134 1.68555 6.81335 2.04947 5.93156 2.72142C5.04976 3.39338 4.41293 4.33621 4.11884 5.40513C3.82476 6.47405 3.88968 7.60996 4.30366 8.63841C4.71763 9.66686 5.45775 10.531 6.41037 11.0981C4.48451 11.7267 2.83427 13.0542 1.76341 14.9062C1.72414 14.9702 1.6981 15.0415 1.68681 15.1158C1.67552 15.19 1.67922 15.2658 1.69769 15.3386C1.71616 15.4114 1.74902 15.4798 1.79435 15.5397C1.83967 15.5996 1.89653 15.6498 1.96157 15.6874C2.02662 15.7249 2.09853 15.7491 2.17306 15.7584C2.24759 15.7678 2.32324 15.7621 2.39554 15.7417C2.46784 15.7213 2.53532 15.6867 2.59401 15.6398C2.65269 15.5929 2.7014 15.5347 2.73724 15.4687C4.06193 13.1793 6.40334 11.8125 8.99998 11.8125C11.5966 11.8125 13.938 13.1793 15.2627 15.4687C15.2986 15.5347 15.3473 15.5929 15.4059 15.6398C15.4646 15.6867 15.5321 15.7213 15.6044 15.7417C15.6767 15.7621 15.7524 15.7678 15.8269 15.7584C15.9014 15.7491 15.9733 15.7249 16.0384 15.6874C16.1034 15.6498 16.1603 15.5996 16.2056 15.5397C16.2509 15.4798 16.2838 15.4114 16.3023 15.3386C16.3207 15.2658 16.3244 15.19 16.3131 15.1158C16.3019 15.0415 16.2758 14.9702 16.2365 14.9062ZM5.06248 6.74996C5.06248 5.9712 5.29341 5.20992 5.72607 4.5624C6.15872 3.91488 6.77368 3.4102 7.49316 3.11218C8.21264 2.81416 9.00435 2.73619 9.76815 2.88812C10.5319 3.04005 11.2335 3.41506 11.7842 3.96573C12.3349 4.5164 12.7099 5.21799 12.8618 5.98179C13.0137 6.74559 12.9358 7.53729 12.6378 8.25678C12.3397 8.97626 11.8351 9.59121 11.1875 10.0239C10.54 10.4565 9.77874 10.6875 8.99998 10.6875C7.95603 10.6863 6.95516 10.2711 6.21698 9.53296C5.47879 8.79478 5.06359 7.79391 5.06248 6.74996Z" fill="black"/>
                                        </svg>
                                    </div>
                                </div>
                            </button>
                        </div>
                    </section>
            <section class="detailsSection">
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                            <th><input type="checkbox"></th>
                            <th>Nombre y Apellido</th>
                            <th>Contraseña</th>
                            <th>Email</th>
                            <th>Nombre de Usuario</th>
                            <th>Rol</th>
                            <th>Telefono</th>
                            <th>Departamento</th>
                            <th>Direccion</th>
                            <th>Municipio</th>
                            <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for usuario in usuarios %}
                            <tr>
                                <td><input type="checkbox"></td>
                                <td>{{ usuario.full_name }}</td>
                                <td>{{ usuario.password }}</td>
                                <td>{{ usuario.email }}</td>
                                <td>{{ usuario.username }}</td> 
                                <td>{{ usuario.get_rol_display }}</td> 
                                <td>{{ usuario.telefono }}</td> 
                                <td>{{ usuario.departamento }}</td>
                                <td>{{ usuario.direccion }}</td>
                                <td>{{ usuario.municipio }}</td>
                                <td>
                                    <button class="buttons" onclick="window.location.href='{% url 'editar_usuario' usuario.id %}'">Editar</button>
                                    <button class="buttons btn-danger" onclick="if(confirm('¿Estás seguro de que deseas eliminar este usuario?')) { window.location.href='{% url 'eliminar_usuario' usuario.id %}'; }">Eliminar</button>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div class="resultsContainer">
                    <div class="mostrarContainer">
                        <h2 id="mostarText">Mostrando 1 a 10 de 50 entradas</h2>
                    </div>
                    <div class="optionsContainer">
                        <div class="mostrar10Container">
                            <div class="mostrarDiv">
                                <h4 id="mostarText">Mostrar</h4>
                            </div>
                            <div>
                                <button id="ButtonTen">10</button>
                            </div>
                        </div>
                        <div class="Container">
                            <button class="flechaButton">
                            </button>
                            <button class="buttonss">1</button>
                            <button class="buttonTwo">2</button>
                            <button class="buttonss">3</button>
                            <button class="buttonss">4</button>
                            <button class="flechaButton">
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>
    <script src="{% static 'js/user-sidebar.js' %}"></script>
    <script>
        // Esperar 3 segundos y ocultar el mensaje
        setTimeout(() => {
            const messageContainer = document.getElementById('message-container');
            if (messageContainer) {
                messageContainer.style.transition = "opacity 0.5s ease";
                messageContainer.style.opacity = "0";
                
                setTimeout(() => {
                    messageContainer.remove();
                }, 500); // Esperar a que termine la transición antes de eliminarlo
            }
        }, 3000); // 3000 ms = 3 segundos
    </script>
</body>
</html>